---

const { lang, t } = Astro.props;
---
<header>
  <nav class="container nav-grid">

    <div class="logo-container">
      <a class="logo" href={`/${lang}/#product-hero`}>
        <span class="logo-96">96</span>
        <span class="logo-text">MATERIALS</span>
      </a>
      <div class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        ☰
      </div>
    </div>
    <!-- <div class="nav-logo">
      <a href="https://anthonycharles.work">
        <img src={Logo.src} alt="brand logo" />
      </a>
    </div> -->

    <div class="nav-links">

      <a href={`/${lang}/#product-hero`}>{t?.nav?.home || "Home"}</a>
      <a href={`/${lang}/#about`}>{t?.nav?.about || "About Us"}</a>
      <a href={`/${lang}/products`}>{t?.nav?.products || "Products"}</a>
      <a href={`/${lang}/#contact`}>{t?.nav?.contact || "Contact"}</a>
      <a href={`/${lang}/reviews`}>{t?.nav?.reviews || "Review"}</a>
      
    </div>

    <!-- <div class="nav-cta">
      <a href="#">{t?.nav?.login || "Login"}</a>
      <a href="https://github.com/LaB-CH3/astrobrew" class="button button-primary">
        {t?.nav?.join || "Join us"}
      </a>
    </div> -->
  </nav>
</header>

<script is:inline> 
  function toggleMobileMenu() {
    const navLinks = document.querySelector('.nav-links');
    if (navLinks) {
      console.log('Toggling mobile menu');
      navLinks.classList.toggle('open');
    }
  }

  document.querySelectorAll('.nav-links a').forEach(link => {
  link.addEventListener('click', () => {
    document.querySelector('.nav-links')?.classList.remove('open');
  });
});

document.addEventListener('click', (event) => {
  const navLinks = document.querySelector('.nav-links');
  const toggleBtn = document.querySelector('.mobile-menu-toggle');
  const logo = document.querySelector('.logo');

  if (
    navLinks?.classList.contains('open') &&
    !navLinks.contains(event.target) &&
    !toggleBtn.contains(event.target) &&
    !logo.contains(event.target)
  ) {
    navLinks.classList.remove('open');
  }
});
</script>

<style lang="scss">
.nav-grid {
  display: grid;
  grid-template-columns: 1fr 3fr 1fr; // ✅ ปรับจาก 12/55/30 เป็นสัดส่วนคงที่
  align-items: center;
  padding-top: 20px;
  padding-block: 1.5rem 1rem; // ✅ เผื่อพื้นที่ด้านบน
}

.logo-container {
  display: flex;
  justify-content: space-between;
  align-items: center;

  @media (min-width: 901px) {
    .mobile-menu-toggle {
      display: none;
    }
  }
}


.logo {
  font-family: 'Anton', sans-serif;
  font-size: 2.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  letter-spacing: 1px;
  text-decoration: none;

  .logo-96 {
    background-color: #2563eb;
    color: white;
    padding: 0.2em 0.4em;
    border-radius: 4px;
  }

  .logo-text {
    color: #333;
  }
}

.mobile-menu-toggle {
  font-size: 2.25rem;
  cursor: pointer;
  color: #333;
  padding: 0.25rem;
}

.logo-96 {
  background-color: #2563eb; /* blue-600 */
  color: white;
  padding: 0.2em 0.4em;
  border-radius: 4px;
}

.logo-text {
  color: #333;
}

.nav-logo img {
  width: 90px;
  margin-left: -6px;
  margin-top: 2px;
}

.nav-cta {
  text-align: right;
}

.nav-links {
  margin-top: -2px;

  @media (max-width: 900px) {
    display: none;
    flex-direction: column;
    background: #fff;
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    position: absolute;
    top: 70px;
    left: 50%;
    transform: translateX(50%);
    z-index: 1000;

    &.open {
      display: flex;
    }

    a {
      margin: 0.5rem 0;
    }
  }
}

a:not(.button) {
  padding: 0 10px;
  color: #333;
  text-decoration: none;
  font-weight: 500;
}

@media (max-width: 900px) {
  .nav-grid {
    grid-template-columns: 1fr;
    text-align: center;
    position: relative;
    .nav-logo img {
      margin-top: 7px;
    }

    .nav-cta {
      text-align: center;
      margin-top: 1rem;
    }
  }
}

.pulse {
  animation: pulse 2s cubic-bezier(.4, 0, .6, 1) infinite;
}

@keyframes pulse {
  50% {
    opacity: 0.7;
  }
}

.tag {
  background-color: var(--tenary);
  color: #fff;
  padding: 5px 10px;
  border-radius: 20px;
  font-size: 1.2rem;
  font-weight: 500;
}

.mobile-menu-toggle {
  display: none;
  font-size: 2rem;
  cursor: pointer;

  @media (max-width: 900px) {
    display: block;
    text-align: right;
  }
}
</style>